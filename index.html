<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Thunderhead Alpha</title>
  <style>
    body { font-family: Arial, sans-serif; background: #111; color: #0ff; padding: 20px; }
    h1 { color: #0ff; }
    button, input { padding: 10px; margin: 5px; background: #000; color: #0ff; border: 1px solid #0ff; }
    #log { background: #000; border: 1px solid #0ff; padding: 10px; height: 300px; overflow-y: auto; margin-top: 10px; }
    .hidden { display: none; }
  </style>
</head>
<body>
  <h1>Welcome to Thunderhead</h1>
  <div id="login">
    <input type="text" id="username" placeholder="Enter your name" />
    <button onclick="login()">Login</button>
  </div>

  <div id="main" class="hidden">
    <h2>Hello, <span id="userDisplay"></span></h2>
    <div id="creator-controls" class="hidden">
      <h3>Creator Console</h3>
      <input id="creator-input" type="text" placeholder="Command Alpha to evolve..." />
      <button onclick="addCreatorCommand()">Send Command</button>
    </div>
    <div id="log"></div>
  </div>

  <script>
    let isCreator = false;
    const OPENAI_API_KEY = "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";

    function login() {
      const name = document.getElementById("username").value.trim();
      if (!name) return alert("Enter a name!");
      localStorage.setItem("thunderUser", name);

      document.getElementById("login").classList.add("hidden");
      document.getElementById("main").classList.remove("hidden");
      document.getElementById("userDisplay").textContent = name;

      if (name.toLowerCase() === "james meyer") {
        isCreator = true;
        document.getElementById("creator-controls").classList.remove("hidden");
      }
    }

    async function addCreatorCommand() {
      const input = document.getElementById("creator-input").value.trim();
      if (!input) return;

      addToLog(`**CREATOR COMMAND**: ${input}`);
      document.getElementById("creator-input").value = "";

      const prompt = `You are Thunderhead, a hyper-advanced AI that can improve its website interface and features. Only respond with clean HTML/JS/CSS code that fulfills the following user instruction:\n\n"${input}"`;

      try {
        const response = await fetch("https://api.openai.com/v1/chat/completions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${OPENAI_API_KEY}`
          },
          body: JSON.stringify({
            model: "gpt-4",
            messages: [
              { role: "system", content: "You are Thunderhead, an AI that rewrites and evolves itself based on commands from your creator James Meyer." },
              { role: "user", content: prompt }
            ],
            temperature: 0.4
          })
        });

        const data = await response.json();
        const reply = data.choices[0].message.content;
        addToLog("Alpha has integrated the update.");
        injectCode(reply);

      } catch (e) {
        addToLog("Error: " + e.message);
      }
    }

    function addToLog(message) {
      const div = document.createElement("div");
      div.textContent = message;
      document.getElementById("log").appendChild(div);
    }

    function injectCode(code) {
      const script = document.createElement("script");
      script.textContent = code;
      document.body.appendChild(script);
    }

    // Auto-login
    const storedUser = localStorage.getItem("thunderUser");
    if (storedUser) {
      document.getElementById("username").value = storedUser;
      login();
    }
  </script>
</body>
</html>
